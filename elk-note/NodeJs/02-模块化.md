

## æ¦‚è¿°
Nodejsæ¨¡å—åŒ–è§„èŒƒéµå¾ªä¸¤å¥—ã€Œ CommonJSè§„èŒƒ | ESMè§„èŒƒ ã€

## CommonJSè§„èŒƒ

### å¼•å…¥æ¨¡å—

> å†…ç½®æ¨¡å— ã€Œ fsã€pathã€httpã€osç­‰ ã€
>
> ç¬¬ä¸‰æ–¹æ¨¡å— ã€Œ expressã€koaã€eggç­‰ã€
> 
> è‡ªå·±ç¼–å†™çš„æ¨¡å— ã€Œ ../../.. ã€
> 
> æ‰©å±•æ¨¡å— ã€Œ c++æ‰©å±•æ¨¡å—ã€.nodeæ–‡ä»¶ç­‰ ã€

```javascript
const fs =  require("node:fs");
const express = require("express");
const myModule = require("../xxx");
const extendModule = require("../xxx.node");
```

### å¯¼å‡ºæ¨¡å—
```javascript
module.exports = {
    name: "elk",
    age: 18
}
module.exports = 1
```
## ESMè§„èŒƒ

### å¼•å…¥æ¨¡å—
> import å¿…é¡»å†™åœ¨å¤´éƒ¨
> 
> åœ¨package.jsonä¸­é…ç½®type: module
> 
> åŠ¨æ€å¯¼å…¥ä½¿ç”¨importå‡½æ•°å½¢å¼

```javascript
import path from 'node:path';
if(true) {
    // import {name,age,say} from './modules.js'  // æ˜¯ä¸å…è®¸çš„ï¼Œç›´æ¥æŠ¥é”™
    import('./modules.js').then(res => {
        console.log("ğŸš€ ~ res:", res.name) // elk
    })
}
```

### å¯¼å‡ºæ¨¡å—
```javascript
export default {
    name: "elk",
    age: 18
}
```

## commonjså’Œesmçš„åŒºåˆ«
>commonjsæ˜¯åŸºäºè¿è¡Œæ—¶çš„åŒæ­¥åŠ è½½ï¼Œesmæ˜¯åŸºäºç¼–è¯‘æ—¶çš„å¼‚æ­¥åŠ è½½
> 
> commonjsæ˜¯å¯ä»¥ä¿®æ”¹å€¼çš„ï¼Œesmå€¼å¹¶ä¸”ä¸å¯ä¿®æ”¹ï¼ˆå¯è¯»çš„ï¼‰
> 
> commonjsä¸å¯ä»¥tree shakingï¼Œesmæ”¯æŒtree shaking
> 
> commonjsä¸­é¡¶å±‚çš„thisæŒ‡å‘è¿™ä¸ªæ¨¡å—æœ¬èº«ï¼Œè€ŒES6ä¸­é¡¶å±‚thisæŒ‡å‘undefined
